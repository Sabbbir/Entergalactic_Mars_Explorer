<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Three.js TrackballControls Demo</title>
  </head>
  <body>
    <!-- <script src="main.js"></script> -->
    <!-- <script type="module" src="test.js"></script> -->
    
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.rawgit.com/mrdoob/three.js/r128/examples/js/controls/TrackballControls.js"></script>
   -->

 <script type="module" src="SphereMarkerDemo.js"></script>
    <!-- <script>
      let scene, camera, renderer, controls;
      const canvas = new Canvas(window);
      function init() {
        scene = canvas.scene;
        canvas.init(document);

        const geometry2 = new THREE.SphereGeometry(2, 32, 16);
        const material2 = new THREE.MeshBasicMaterial({ color: 0x499247 });
        const sphere = new THREE.Mesh(geometry2, material2);
        // scene.add(sphere);

        // create a temporary object
        const tempObject = new THREE.Object3D();
        const tempPosition = new THREE.Vector3();
        const tempNormal = new THREE.Vector3();
        //

        tempPosition.copy(randomPointOnSphere()).multiplyScalar(2);
        tempNormal.copy(tempPosition).normalize();
        tempObject.position.copy(tempPosition);
        tempObject.lookAt(tempNormal.add(tempPosition));
        tempObject.updateMatrix();
        const box = new THREE.Mesh(
          new THREE.BoxGeometry(0.5, 0.5, 0.5),
          new THREE.MeshBasicMaterial({ color: 0xff0000 })
        );
        box.applyMatrix4(tempObject.matrix);
         scene.add(box);

      }

      init();
      canvas.gameLoop();

      //Funcitons

      function randomPointOnSphere() {
        let x = Math.random() * 2 - 1;
        let y = Math.random() * 2 - 1;
        while (x * x + y * y > 1) {
          x = Math.random() * 2 - 1;
          y = Math.random() * 2 - 1;
        }
        let z = Math.sqrt(1 - x * x - y * y);
        return new THREE.Vector3(x, y, z);
      }

      // define a function that takes a text as a parameter and returns a 3DObject
      function createTextObject(text) {
        // load a font
        const loader = new THREE.FontLoader();
        loader.load("fonts/helvetiker_regular.typeface.json", function (font) {
          // create a text geometry from the font and the text
          const textGeometry = new THREE.TextGeometry(text, {
            font: font,
            size: 1,
            height: 0.2,
            curveSegments: 12,
            bevelEnabled: true,
            bevelThickness: 0.1,
            bevelSize: 0.1,
            bevelOffset: 0,
            bevelSegments: 5,
          });

          // create a shape geometry from a star shape
          const shape = new THREE.Shape();
          // make a star shape
          const x = 0,
            y = 0;
          const innerRadius = 0.8,
            outerRadius = 2;
          shape.moveTo(x + innerRadius, y);
          for (let i = 1; i < 10; i++) {
            const angle = (i * Math.PI) / 5;
            const radius = i % 2 === 1 ? innerRadius : outerRadius;
            shape.lineTo(
              x + Math.cos(angle) * radius,
              y + Math.sin(angle) * radius
            );
          }
          shape.lineTo(x + innerRadius, y);
          const shapeGeometry = new THREE.ShapeGeometry(shape);

          // create a material
          const material = new THREE.MeshBasicMaterial({ color: 0xff0000 });

          // create a text mesh and position it above the shape
          const textMesh = new THREE.Mesh(textGeometry, material);
          textMesh.position.y = 2.5;

          // create a shape mesh
          const shapeMesh = new THREE.Mesh(shapeGeometry, material);

          // create a group to hold the text and the shape
          const marker = new THREE.Group();
          marker.add(textMesh);
          marker.add(shapeMesh);

          // return the group as a 3DObject
          return marker;
        });
      }
    </script> -->
  </body>
</html>
